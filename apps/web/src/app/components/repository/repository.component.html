<div class="repository-container">
  <header class="header">
    <h1>Repository Management</h1>
    <p>Connect and manage your code repositories</p>
  </header>

  <div class="content">
    <div class="add-repo-section">
      <h2>Add New Repository</h2>
      
      <div class="form-group">
        <label for="repoName">Repository Name</label>
        <input id="repoName" type="text" [(ngModel)]="newRepo.name" placeholder="my-awesome-project" />
      </div>

      <div class="form-group">
        <label for="githubUrl">GitHub URL</label>
        <input id="githubUrl" type="text" [(ngModel)]="newRepo.githubUrl" placeholder="https://github.com/username/repo" />
      </div>

      <button class="btn btn-primary" (click)="addRepository()" [disabled]="loading()">
        {{ loading() ? 'Adding...' : 'Add Repository' }}
      </button>
    </div>

    <div class="error-message" *ngIf="error()">
      <p>{{ error() }}</p>
    </div>

    <div class="repositories-section">
      <h2>Your Repositories</h2>
      
      <div class="loading" *ngIf="loading() && repositories().length === 0">
        <p>Loading repositories...</p>
      </div>

      <div class="empty-state" *ngIf="!loading() && repositories().length === 0">
        <p>No repositories yet. Add your first repository above!</p>
      </div>

      <div class="repo-list" *ngIf="repositories().length > 0">
        <div class="repo-card" *ngFor="let repo of repositories()">
          <div class="repo-header">
            <h3>{{ repo.name }}</h3>
            <div class="repo-actions">
              <button class="btn btn-small" (click)="viewAnalyses(repo.id)">View Analyses</button>
              <button class="btn btn-small btn-danger" (click)="deleteRepository(repo.id)">Delete</button>
            </div>
          </div>
          <div class="repo-body">
            <p class="repo-url">{{ repo.githubUrl }}</p>
            <div class="repo-meta">
              <span class="meta-item">Created: {{ repo.createdAt | date:'short' }}</span>
              <span class="meta-item" *ngIf="repo.lastAnalyzedAt">
                Last analyzed: {{ repo.lastAnalyzedAt | date:'short' }}
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
